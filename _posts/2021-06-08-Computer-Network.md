---
title: 计算机网络基础
author: lijiabao
date: 2021-06-08 23:40:24
category: 计算机网络
categories: 计算机网络
tags: 计算机网络

---

介绍一下计算机网络的一些基本概念，以及计算机中数据交换的方式和计算机网络的分层结构



# 计算机网络

## 1 基本术语

### 1.1 Internet结构中的术语

**端系统**：计算机系统、手机、平板和需要联网的打印机等都被称为端系统或者主机

**接入网络**：连接端系统到边缘路由器的物理实体

**因特网服务供应商（ISP**）：提供个人主机或者企业主机连接到因特网的供应者，是由多个分组交换机和多组通信链路连接在一起组成的网络。包括有本地电缆或电话公司、机构ISP（用于公司、高校的ISP）、无线接入网络（无线局域网LAN（小范围内）和广域无线接入（运营商提供，接入范围大））。

常用的接入网络：

- 家庭接入，DSL、电缆拨号和卫星
- 企业接入：以太网和无线电WiFi
- 广域无线接入：电信移动网络，LTE和5G这类技术

**物理媒体**：完成连接端系统之间的相互连接的物理实体

物理媒体类型：

- 双绞铜线
- 同轴电缆
- 光纤
- 陆地无线电通信
- 卫星无线电通信

### 1.2 数据交换中的术语

**带宽**：数字信道所能传送的最高数据传输速率

**报文**：源端系统发送的内容整体，可以是执行一种控制功能，也可以包含数据（如jpg图片或者MP3音频数据等）

**分组**：为了从源端系统向目的端系统发送一个报文，源需要将长报文划分为较小的数据块，这个数据块被称为分组。需要进行额外的分组和重组，增加了开销

**分组交换机**：分组交换机从入通信链路接受到达的分组，然后通过出通信链路转发该分组，常见的类型就是路由器和链路层的交换机。

**存储转发**：在交换机报文数据/分组数据可以开始传输第一个比特数据之前，需要该分组或者报文完全接收完毕之后才将数据转发到目的主机上去。

网络的两大核心关键功能：**路由和转发**，实现了将数据从源主机传输到目的主机

**路由**：确定分组从源到目的地的传输路径（利用路由算法来计算）

**转发**：将分组从路由器的输入端口交换到正确的输出端口

**网络协议**：为进行网络中的数据交换而建立的规则、标准或约定。这一些标准既是用来规范使用者怎么使用这一系列的API来完成自己的任务，也规定了处理者怎么处理传送过来的任务。如果两者之间没有一个明确协议或者规定，那么使用者传递过来的信息处理者不能正确的解析，从而没法完成任务。

**转发表**：用于将目的地址（或目的地址的一部分）映射成为输出链路。当某个分组到达一台路由器时，路由器检查该地址，并利用目的地址搜索转发表，来发现合适的出链路，然后路由器将分组转向该出链路。

**路由选择协议**：用来决定从每台路由器到每个目的地的最短路径，并利用这些最短路径来配置路由器中的转发表

### 1.3 协议相关的术语

**IETF（网络工程任务组）**：专门从事互联网工程研发设计协议制定任务的工作组，为了对协议有一个一致的标准而成立

**RFC（请求评论）**：IETF制定的标准文档

**IEEE 802 202**：以太网和WiFi遵守的标准或者协议

### 1.4 分组交换中的术语

**时延**：数据传输完毕所需要的时间。分组数据传输时在每个结点（路由或主机）传输的时延有几种不同的类型

- 结点处理时延：在结点处检查分组头部并决定分组下一步需要通往的出链路所需要的时间是处理时延的一部分，结点处理完毕后，路由器将分组引向路由器链路之前的队列
- 排队时延：分组在链路上等待传输所需要的时间，这取决于先于该分组到达队列的分组数量
- 传输时延：将分组的所有数据L推向出链路所需要的时间，这个时间取决于链路传输效率R，L/R
- 传播时延：将分组数据从当前路由器传输到下一个路由器时所需要的时间，传播速率取决于链路的物理媒体的传播速率，传播时延等于两台路由器之间的距离除以传播速率。传输时延是将分组退出路由需要的时间，而传播时延是两个路由器之间传播需要的时间，和分组大小无关
- 结点总时延：上述四种时延的总和

**流量强度**：分组长度和平均分组到达速率的乘积和链路带宽的比值，为0，平均排队延迟很小，1很大，大于1，超出服务能力，平均排队延迟无限大

**排队时延**：如果分组传送到交换机之后，如果需要进入传输的交换链路正在传输其他分组的化，这个分组就需要等待该链路的传输工作完成之后才到，这个等待的时间就是排队时延，这个时间是不确定的，这也是时延中最复杂最难以预测的。

**时延带宽积**：传播时延和带宽的乘积

**丢包（分组丢失）**：因为采用的是存储转发的模式，此时如果交换机的缓存队列已经满了，此时如果再到达另外的一个分组，就会造成这个分组或者之前已经缓存的分组丢失。丢包量会随着传输的数据流量的增加而增加。**结点的性能往往是通过丢包率来度量。**

**端到端时延：**源主机到目的主机的总时延

**traceroute程序**：用来查看追踪数据传输需要经过的路由器信息

**端系统时延**：由于某些协议，端系统可以有意的延迟传输从而得以与其他的端系统共享媒体

**媒体分组化时延**：出现在IP语音应用中VoIP，因为需要先用编码的数字化语音填充一个分组，这个填充所需要的时间称为分组化时延

**吞吐量**：就是两个主机之间接受文件的速率

**瞬时吞吐量**：指目的主机在任何时间瞬间接受该文件的速率

**平均吞吐量**：指主机接受所有数据整个的平均速率，就是数据量除以传输时间

**瓶颈链路**：端到端路径上，限制端到端吞吐量的链路，如果瓶颈链路数据交换速率过小，整个端到端路径的速率就会被这个链路所限制

### 1.5 计算机网络体系结构的术语

**计算机网络体系结构**：是一个计算机网络的**各功能层次**及**各种协议**的集合，是一个**分层结构**

**体系结构**：是一个计算机网络中各种功能层次及其关系的定义，体系结构是**抽象的**

## 2 协议

协议三要素：

- 语法：数据和控制信息的结构或者格式
- 语义：需要发出什么控制信息、完成什么动作以及做出什么响应
- 时序：事件发生的顺序

端系统、分组交换机和其他的因特网部件都需要运行一系列的协议，这些协议控制着数据的接受和发送

TCP（Transmission control protocol传输控制协议）和IP（Internet protocol网际协议）是计算机网络最常用的两个协议

因为协议的重要性，因此对协议有一个一致的认识和标准是很有必要的。因特网标准是因特网工程任务组（IETF）研发，IETF（Internet engineering task force）的标准文档被称为RFC请求评论（request for comment）

RFC定义了TCP、IP、HTTP（web协议）、SMTP（邮件协议）等协议

IEEE 802 LAN/MAN [IEEE 802 202] 制定了以太网和无线WiFi标准

## 3 网络核心

### 3.1数据交换的方法

通过交换机和通信电路交换数据主要有：分组交换、报文交换和电路交换这几种方法。

其中的报文交换和分组交换采用的都是**存储转发**的传输方式

#### 3.1.1 分组交换

将报文数据分成较小的数据块，再对分组进行数据传输交换。分组交换需要进行额外的分组（源主机进行分组）和重组操作（目的主机进行重组），为了保证数据传输不会出错，采用了先将分组全部传输到交换机之后再进行转发操作的存储转发模式。



#### 3.1.2 电路交换

电路交换的三个阶段：

- 建立连接（呼叫/电路建立）
- 通信
- 释放电路

电路交换网络的典型应用：电话网络

##### 多路复用

电路交换网络中的链路共享：多路复用

将链路或者网络资源称为资源片，将资源篇给到多路共用呼叫，每路利用分配呼叫到的资源篇进行通信。资源片没有被呼叫时就处于闲置状态

多路复用的方法：

- 频分多路复用：占用资源片的不同频段（频率带宽），分配好后就一直占用这个带宽
- 时分多路复用：占用不同的时间，时分复用帧（TDM帧），不同时间占用相同的带宽
- 波分多路复用：光的频分复用
- 码分多路复用：广泛用于无线链路共享，每个用户分配唯一的码片序列，各用户使用相同的频率载波，利用分配的码片序列编码数据

#### 3.1.3 报文交换

数据传输的时候将整个报文作为传输数据进行直接的传输，这样的传输方法需要等待上一个路由器传输完毕整个报文数据才能够向下一个出链路进行传输。而相比之下，分组交换将整个报文分成多个分组，这样在一个分组传输完毕之后就可以进行下一个出链路的传输，效率值更高，等待的时间会少很多。

#### 3.1.4 各种数据交换的优缺点

- 相比电路交换（用户独占资源），分组交换可以更好的利用网络中的资源（资源共享）。电路交换必须给用户预留专用的电路，而当该电路处于静默期（空闲无数据传输）时并未能狗将其利用起来，因此相比之下，分组交换对于网络资源利用更充分
- 相比电路交换，不需要呼叫建立连接，因此更简单高效
- 相比报文交换，分组交换传输数据传输效率更高
- 但是相比电路交换，存在排队时延，而且这个时延是可变的且很难预测

### 3.2 网络之网络ISP

端系统之间通过数据链路和分组交换机相互连接通信

端系统通过因特网服务供应商（ISP）提供的服务连接到因特网中

接入ISP之间必须进一步相互互联，这样任意两个主机之间才可以互相发送分组

计算机网络的相互连接的方案：

1. 每个接入ISP之间彼此互联，不适用于大规模的网络连接，连接数量是指数型的
2. 将每个ISP接入到一个国家或者全球的ISP中

不同ISP之间的互联方案：

1. 对等链路（peering link）：直接使用通信链路连接不同ISP，因其直接通过通信链路连接而不用向上级ISP费用
2. IXP（Internet exchange point）互联网交换机：本身就是一个高速网络
3. content provider  network内容提供商网络：运行自己的网络并就近为端用户提供网络
4. 区域网络：小型的某个区域的Internet网络，可能需要向上一级的ISP付费

少数互联的大型网络：

- 一级商业ISPs（电信、移动、AT&T）提供国家或国际范围的覆盖，不需要付费，因为处于结构的顶端
- 内容提供供应商（如Google）私有网络，连接其数据中心和Internet，通常绕过一级ISP和区域ISP

![](https://i.loli.net/2021/06/07/MEVF2NeZ5pSsRwG.png)

## 4 计算机网络体系结构

计算机网络体系结构是**分层结构**，是从**功能上**描述计算机网络结构，每层遵循某个或者某些**网络协议**完成本层功能

### 4.1 为什么采用分层结构

- 分层结构**结构更清晰**，有利于识别复杂系统的部件及其关系
- 模块化的分层**易于系统更新、维护**
  - 任意一层服务实现的改变并不会影响到其他层的功能实现
- 有利于标准化

### 4.2 计算机网络结构

**协议栈**：

![image-20210608231636079](https://i.loli.net/2021/06/08/dfngBzw95AuChEF.png)

**七层ISO OSI参考模型**：

![image-20210608231914663](https://i.loli.net/2021/06/08/o2qtg6hFW9PxOl1.png)

