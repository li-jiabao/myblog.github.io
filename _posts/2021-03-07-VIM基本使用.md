---
title: VIM基本使用
author: lijiabao
e-mail: lijiabao@smail.nju.edu.cn
date: 2021-03-07-23:57:14
categories: vim使用
tags: vim使用
description: 介绍vim编辑器中常用的一些基本命令和一些实用操作
---


unix下面自带的文本编辑是vi，Linux也带有这个，vim是加强版的vi，Linux主要使用vim，vi和vim的很多操作是一样的。

## VIM常用命令


#### 光标位置跳转命令
	
命令 | 操作 
:----: | :----: 
字母`o` | 在当前行的下方添加一行
大写字母`O` | 在当前行的下方添加一行
`a` | 在当前光标后面一个字符进入插入模式
`i` | 进入插入模式
`esc` | 回到normal命令行模式
`v` | 进入visual模式
`kjhl和上下左右` | 光标的上下左右的移动
数字`0` | 回到行首
`shift+4或6`也就是`^`和`$` | 行首和行尾
字母`W`和`B` | 下一单词或标点/下一单词或标点的开头
字母`w`和`e` | 移动到下一个单词开头或者是下一单词的末尾
`ctrl+F/B` | 下翻/上翻一页
`Page Down/Page Up` | 下翻/上翻一页
`shift-g(G)` | 到最后一行
`num-G(shift-g)` | 到第num行
`G/shift+g` | 跳转到末尾，在前加number跳转到number行
`gg` | 跳转到首行
`ctrl+g`  | 显示当前的行的信息


#### 删除文本操作

dd命令也能当成剪切命令使用

命令 | 操作
:----: | :----: 
字母`x` | 删除当前光标所在字符
`num+x` | 删除光标所在及之后的num-1个字符
`dd`  | 删除当前行
`num+dd` | 删除当前行及其之后num-1行
`dW` | 删除当前字符到下一单词开始
`d$` | 删除当前字符到当前行的末尾
`d0` | 删除当前字符到当前行开头
`d^` | 删除当前字符到当前行的下一非空字符
`dG` | 删除当前行到末尾行
`d+num+G` | 删除当前行到num行

#### 复制

yy和dd操作一样,只不过是复制文本

命令 | 操作
:----: | :----:
`yy` | 复制当前行
`num+yy` | 复制当前行及其之后num-1行
`yW` | 复制当前字符到下一单词的起始
`y$` | 复制当前字符到当前行的末尾
`y0` | 复制当前字符到当前行的起始
`y^` | 复制当前字符到当前行的下一个非空字符
`yG` | 复制当前行到末尾
`y+num+G` | 复制当前行到num行

复制之后的**粘贴**是`p`命令，vi还提供了合并行的命令，在行输入`J`就可以合并前后的两行为一行，支持`num+J`多行合并

#### 查找替换

**行内搜索**：`f+搜索字符`如`fa`在行内搜索a字符，分号`;`重复上一次搜索

**全局搜索**：`/搜索单词或词语`如`/hello`搜索hello，`n`继续搜索下一个位置，支持正则表达式。
`N`搜索上一个
如果使用`?`代替`/`搜索，进行的是反向搜索
`ctrl+o`回到先前的位置
`ctrl+i`回到先后的位置

**匹配括号**:`%`跳转到匹配当前括号的位置==debug有用==

**替换**：
字符的替换：`rx`x是你需要用来替换当前字符的字符
`R`进入插入操作，每个插入字符替换当前光标字符，可以替换多个，直到按`ESC`退出替换操作

`:%s/line/Line/g`
命令的组成和含义：

成分 | 含义
:---: | :---:
`:` | 用以启动命令
`%` | 指定操作范围,也可以是`1,5`或者`1,$`之类的
`s` | 指定为替换操作
`/line/Line/` | line和Line分别是搜索和替换字符串
`g` | 指定为对所有满足匹配字符串进行操作,不指定就会默认操作一次
`g`设置为`gc` | 每次替换都会询问是否操作

替换确认的功能键:

键 | 功能
:---: | :---:
`y` | 执行替换
`n` | 取消替换
`a` | 跳过此次及其之后的操作
`q`or`esc` | 取消替换
`l` | 执行此次替换并退出,last
`ctrl+e/y` | 向下或向上滚动,用于查看替换处的上下文情况


#### 编辑多个文件

在使用vim的时候,可以指定多个文件名来打开多个文件,这样就可以在一个vim中编辑多个文件了，如果没有在命令行下打开多个文件时，可以在vim中的normal模式下打开文件：
`:e filename`然后回车即可打开该文件，但是使用这个命令打开的文件不可以使用`:n`和`:N`来切换,只能使用`:buffer num`来切换

**切换文件**：
`:n`切换到下一个文件
`:N`切换到下一个文件
`:buffers`查看正在编辑的文件列表
`:buffer num`num是buffers命令显示的文件前面的标号,这个用来切换到指定标号的文件

**不同文件之间的复制剪切**：
在一个文件执行了复制剪切操作后,使用`:buffer`切换到想要复制的文件中去,使用`p`命令粘贴即可

**插入整个文件**：
先将光标移动到想要粘贴整个文件过来的位置（`:r`将文件内容插入到光标位置之前）然后使用下面的命令,便会粘贴文件内容过来：
`:r filename`

**保存**：
`ZZ`和`:wq`操作一样，保存退出
`:w another-filename`这样的操作可以当作重命名的操作来实现。


#### 撤销和反撤销

`u`撤销
`ctrl+r`反撤销
`U`撤销在一行的所有操作


#### 编辑命令

`ce`删除当前字符到当前单词的末尾并进入编辑模式
`cc`删除整行并进入插入模式
更多和c有关的操作：
`c$`删除当前字符到行尾并进入插入模式

## 几种命令的总结

这几种命令的常用格式
`operator [number] motion`

operator的选项：
`c`删除字符并进入插入模式，也就是修改操作
`d`剪切操作
`y`复制操作

motion（和光标移动的命令一样的）选项:
`$`行尾
`^`行首第一个非空字符
`G`文件末尾行
`gg`到文件首行
`w`下一单词起始，大写忽略标点
`e`当前单词末尾
`b`上一单词开始，大写忽略标点
`0`这是数字零，到当前行的起始

number是数字：代表执行后面motion的次数

可以通过这几个组成类似的像下面的操作,不过可能有些操作组不上。

命令 | 操作
:----: | :----: 
字母`x` | 删除当前光标所在字符
`num+x` | 删除光标所在及之后的num-1个字符
`dd`  | 删除当前行
`num+dd` | 删除当前行及其之后num-1行
`dW` | 删除当前字符到下一单词开始
`d$` | 删除当前字符到当前行的末尾
`d0` | 删除当前字符到当前行开头
`d^` | 删除当前字符到当前行的下一非空字符
`dG` | 删除当前行到末尾行
`d+num+G` | 删除当前行到num行



## VIM执行命令
  
  需要在命令前面加上`:`号，同时在最后必须加上`<ENTER>`回车（这些不仅允许你执行外部的shell命令`:!ls`，这样可以执行任何shell命令）还支持vim自己的一些命令
  
  命令 | 操作
  :----: | :----:
  `:q`和`:q!`  | 推出和强制退出
  `:w`和`:w!` | 保存和强制保存
  `:w another-name` | 把当前文件另存为another-name
  `:wq` | 保存并退出,也可以加!强行操作
  `:num` | 到第num行
  `:buffers` | 查看打开的文件列表
  `:buffer num` | 切换到编号num的打开的文件
  `:r filename` | 取回文件内容，然后放在光标行上面
  `:r !ls` | 也可以读取命令的输出写入到光标的下方
  `:set option` | 用来设置特定的选项，如`:set ic`忽略大小写

> 选项的设置：
> `ic` `ignorecase`忽略大小写  `:set ic`
> `is` `incsearch`显示部分匹配 `:set is`
> `hls` `hlsearch`高亮匹配内容 
> `:set hls is`设置两个
> 在选项前面加上no关闭选项`:set noic`



## visual模式
  
  visual模式下可以用来查看选择内容，然后按下`:`，出现`:'<,'>`，然后可以使用保存`w filename`命令，将选中的内容保存到指定文件名的文件中。
  
  当然也可以使用`d`命令删除选中文本
  
  
  ## VIM帮助
  
  `:help`或（`<F1>`或`<HELP>`键（如果有））进入帮助界面
  
 `ctrl+w`从一个窗口跳到另外一个窗口
 `:q`关闭help窗口
 
如果想查看特定命令或者选项或者帮助文档的帮助，可以为`:help`提供一个参数如：
`:help w`
`:help user-maunl`
`:help ic`
`:help insert-index`

查看关于vimrc信息：`:help vimrc-intro`

## 添加一个启动vimscript脚本

有些vim的特点都是默认关闭的，因此如果想要使用的话，需要使用`vimrc`文件来设置启动
vimrc文件编辑：
Unix：`:e ~/.vimrc`
Windows：`:e $VIM/_vimrc`

vimrc示例文件读取：
`:r $VIMRUNTIME/vimrc_example.vim`
可以将这个文件写入到vimrc配置文件中

查看更多关于vimrc介绍：`:help vimrc-intro`

### completion补全

命令行补全按键`ctrl+d`和`<TAB>`

确保vim不处于兼容模式：
`:set nocp`

然后就可以使用补全了：
`:e `这时候按补全键就可出现可以编辑的文件名了
`:`这时候按补全键便可补全可以操作的命令了
`:e`这时候会补全e开头的命令
